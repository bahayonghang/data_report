# API 概览

本 API 文档旨在为开发者提供与数据分析报告系统集成的详细信息。系统提供了一套功能强大的 RESTful API，允许您通过编程方式与平台进行交互，实现文件上传、数据分析、历史记录查询等核心功能。

## 核心特性

- **文件上传与分析**: 支持 CSV 和 Parquet 格式的数据文件上传，并自动执行一系列数据分析。
- **丰富的分析功能**:
    - 描述性统计
    - 缺失值分析
    - 相关性矩阵
    - 时间序列平稳性检验 (ADF Test)
- **数据可视化**:
    - 时间序列图
    - 相关性热力图
    - 分布直方图
    - 箱形图
- **历史记录与缓存**:
    - 保存每次上传和分析的记录。
    - 对于重复上传的相同文件，可直接返回历史分析结果，提高效率。

## API 设计原则

我们的 API 设计遵循以下原则，以确保一致性、易用性和可预测性：

- **RESTful**: 遵循 RESTful 设计原则，使用标准的 HTTP 方法（GET, POST, DELETE）和状态码。
- **JSON 格式**: 所有 API 请求和响应均使用 JSON 格式，确保跨平台兼容性。
- **统一的响应结构**: API 响应遵循统一的结构，包含 `success`、`data` 和 `error` 字段，便于客户端处理。
- **清晰的错误处理**: 提供明确的错误代码和详细的错误信息，帮助开发者快速定位和解决问题。
- **版本控制**: API 通过 URL 进行版本控制（例如 `/api/v1`），确保未来的更新不会破坏现有集成。

## 认证与授权

当前版本的 API 无需认证即可访问，适用于内部网络或受信任的环境。未来的版本将引入基于 Token 的认证机制，以增强安全性。

## 基本 URL

所有 API 端点的基础 URL 如下：

```
http://<your-server-address>:<port>
```

例如，在本地开发环境中，基础 URL 通常为 `http://localhost:8000`。

## API 端点概览

| 方法 | 端点 | 描述 |
| :--- | :--- | :--- |
| `POST` | `/api/upload-and-analyze` | 上传文件并执行分析 |
| `GET` | `/api/file-history` | 获取文件上传历史记录 |
| `GET` | `/api/files/{file_id}/analysis` | 获取指定文件的分析历史 |
| `GET` | `/api/analysis/{analysis_id}/result` | 获取指定分析的详细结果 |
| `POST` | `/api/search` | 搜索文件 |
| `GET` | `/api/history/{history_id}` | 获取历史记录的分析结果 |
| `DELETE` | `/api/history/{history_id}` | 删除指定的历史记录 |
| `GET` | `/api/storage/stats` | 获取存储统计信息 |

## 响应格式

### 成功响应

```json
{
  "success": true,
  "data": {
    // ... 响应数据
  }
}
```

### 失败响应

```json
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "详细的错误信息",
    "details": {
      // ... 可选的错误详情
    }
  }
}
```

## 客户端集成

我们建议开发者在客户端实现以下最佳实践，以确保稳定和高效的集成：

- **错误处理**: 实现完整的错误处理逻辑，根据响应中的错误代码和信息向用户提供清晰的反馈。
- **超时与重试**: 为 API 请求设置合理的超时时间，并对网络错误或部分服务端错误实施重试机制。
- **异步处理**: 对于文件上传和分析等耗时操作，使用异步请求或在客户端显示加载状态，以提升用户体验。

## 后续步骤

- **[端点详解](endpoints.md)**: 查看每个 API 端点的详细请求和响应格式。
- **[数据模型](data-models.md)**: 了解 API 中使用的数据结构和定义。
- **[快速入门](../getting-started/basic-usage.md)**: 学习如何通过界面与系统交互。

我们致力于不断改进和扩展 API 功能。如果您有任何建议或疑问，请随时通过 [GitHub Issues](https://github.com/your-repo/issues) 与我们联系。
